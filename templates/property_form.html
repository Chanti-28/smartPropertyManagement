{% extends "base.html" %}
{% block content %}
{% if mode == "create" %}
  <h2 class="mb-3">Add New Property</h2>
  <p class="text-muted mb-4">Create a new smart property record in your cloud portfolio.</p>
{% else %}
  <h2 class="mb-3">Edit Property</h2>
  <p class="text-muted mb-4">Update details and keep your portfolio fresh.</p>
{% endif %}

<form method="post" enctype="multipart/form-data" class="cloud-form">
  <div class="row g-3">
    <div class="col-md-6">
      <label for="title" class="form-label">Title</label>
      <input
        type="text"
        class="form-control"
        id="title"
        name="title"
        required
        value="{{ prop.title if prop else '' }}"
      >
    </div>
    <div class="col-md-6">
      <label for="city" class="form-label">City</label>
      <input
        type="text"
        class="form-control"
        id="city"
        name="city"
        required
        value="{{ prop.city if prop else '' }}"
      >
    </div>
    <div class="col-12">
      <label for="address" class="form-label">Address</label>
      <input
        type="text"
        class="form-control"
        id="address"
        name="address"
        required
        value="{{ prop.address if prop else '' }}"
      >
    </div>
    <div class="col-12">
      <label for="description" class="form-label">Description</label>
      <textarea
        class="form-control"
        id="description"
        name="description"
        rows="3"
        required
      >{{ prop.description if prop else '' }}</textarea>
    </div>
    <div class="col-md-4">
      <label for="monthly_rent" class="form-label">yearly Rent (â‚¬)</label>
      <input
        type="number"
        min="1"
        step="0.01"
        class="form-control"
        id="monthly_rent"
        name="monthly_rent"
        required
        value="{{ prop.monthly_rent if prop else '' }}"
      >
    </div>
    <div class="col-md-4">
      <label for="status" class="form-label">Status</label>
      <select class="form-select" id="status" name="status">
        {% set current_status = prop.status if prop else 'Available' %}
        {% for s in ["Available", "Occupied", "Under Maintenance"] %}
          <option value="{{ s }}" {% if s == current_status %}selected{% endif %}>{{ s }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="col-md-4">
      <label for="image" class="form-label">Property Image</label>
      <input class="form-control" type="file" id="image" name="image" accept="image/*">
      {% if prop and prop.image_filename %}
      <div class="form-text">
        Current image: {{ prop.image_filename }}
      </div>
      {% endif %}
    </div>
  </div>

  <div class="d-flex justify-content-between align-items-center mt-4">
    <a href="{{ url_for('index') }}" class="btn btn-outline-secondary">Cancel</a>
    <button type="submit" class="btn btn-primary cloud-btn">
      {% if mode == "create" %}Create Property{% else %}Save Changes{% endif %}
    </button>
  </div>
</form>
{% endblock %}
